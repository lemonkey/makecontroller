<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<LINK href="doxygen.css" />
<title>MAKE Controller Kit</title>
<link href="mt_doxygen.css" rel="stylesheet" type="text/css" />
<link href="../resources/mt_doxytabs.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div align="left">
  <table width="95%" border="0">
    <tr>
      <td><div align="center"><a href="http://www.makingthings.com"><img src="../resources/logo_brown_medium.png" alt="MakingThings" width="200" height="78" border="0" align="middle" longdesc="http://www.makingthings.com" /></a></div></td>
      <td><div align="center"><font size="6">MAKE Controller Kit</font></div></td>
      <td><div align="center"><a href="http://www.makezine.com"><img src="../resources/make_logo.png" alt="MAKE Zine" width="164" height="73" border="0" align="middle" longdesc="http://www.makezine.com" /></a></div></td>
    </tr>
  </table>
<span class="style2"><a href="http://www.makingthings.com"></a></span></div>
</body>
</html>
<!-- Generated by Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>Rtos<br>
<small>
[<a class="el" href="group___controller.html">Controller</a>]</small>
</h1>The FreeRTOS subsystem provides a real-time operating system (RTOS) for the MAKE Controller.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___rtos.html#g9a64a7c0e24f257826103d1d1bbb44fa">Sleep</a> (int timems)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put a task to sleep.  <a href="#g9a64a7c0e24f257826103d1d1bbb44fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___rtos.html#gbe9e0304997a15f46d9eae37be16e3f2">TaskYield</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Give up the remaining time allotted to this task by the processor.  <a href="#gbe9e0304997a15f46d9eae37be16e3f2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___rtos.html#g784f87fb45eebb76d07478036ed228d3">TaskCreate</a> (void(taskCode)(void *), char *name, int stackDepth, void *parameters, int priority)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new task.  <a href="#g784f87fb45eebb76d07478036ed228d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___rtos.html#g5bc41573c59208d32d999e2f394ad3ce">TaskDelete</a> (void *task)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete an existing task.  <a href="#g5bc41573c59208d32d999e2f394ad3ce"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___rtos.html#gd02e088c48f69fd07cf3157bcceb01b7">TaskEnterCritical</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specify that a task is entering a period during which it should not be interrupted.  <a href="#gd02e088c48f69fd07cf3157bcceb01b7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___rtos.html#g0911fd273992ff4dec66d096a9dc3257">TaskExitCritical</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specify that a task is exiting a critical period, in response to <a class="el" href="group___rtos.html#gd02e088c48f69fd07cf3157bcceb01b7">TaskEnterCritical()</a>.  <a href="#g0911fd273992ff4dec66d096a9dc3257"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gf8ee6a74b03a39bce7c3b7d95fea303c"></a><!-- doxytag: member="Rtos::Malloc" ref="gf8ee6a74b03a39bce7c3b7d95fea303c" args="(int size)" -->
void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___rtos.html#gf8ee6a74b03a39bce7c3b7d95fea303c">Malloc</a> (int size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g6b0be54448d6ce393134400f4b22fa97"></a><!-- doxytag: member="Rtos::Free" ref="g6b0be54448d6ce393134400f4b22fa97" args="(void *memory)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___rtos.html#g6b0be54448d6ce393134400f4b22fa97">Free</a> (void *memory)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The FreeRTOS subsystem provides a real-time operating system (RTOS) for the MAKE Controller. 
<p>
FreeRTOS is an open source Real-Time Operating System. It implements scheduling algorithms that give time to "concurrent" tasks according to their given priority. It allows programmers to focus on programming each process on the board more or less separately, letting the RTOS dictate when each of those tasks should be given processor time.<p>
Each process on the board is known as a task, and each task is generally implemented as a continuous loop. It is important to ensure that each task will block at some point so that other tasks will have a chance to run - otherwise the Controller will lock up. The easiest way to do this is with a call to <a class="el" href="group___rtos.html#g9a64a7c0e24f257826103d1d1bbb44fa">Sleep( )</a> when the task is not urgent.<p>
More info at <a href="http://www.freertos.org">http://www.freertos.org</a> <hr><h2>Function Documentation</h2>
<a class="anchor" name="g9a64a7c0e24f257826103d1d1bbb44fa"></a><!-- doxytag: member="rtos.c::Sleep" ref="g9a64a7c0e24f257826103d1d1bbb44fa" args="(int timems)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Sleep           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>timems</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Put a task to sleep. 
<p>
This lets the processor give time to other tasks. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timems</em>&nbsp;</td><td>An integer specifying how long to sleep in milliseconds. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="rtos_8c-source.html#l00050">50</a> of file <a class="el" href="rtos_8c-source.html">rtos.c</a>.
<p>
Referenced by <a class="el" href="poly_8c-source.html#l00189">PolyTask()</a>, <a class="el" href="usb_8c-source.html#l00059">Usb_SetActive()</a>, and <a class="el" href="usb_8c-source.html#l00171">Usb_SlipReceive()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="g784f87fb45eebb76d07478036ed228d3"></a><!-- doxytag: member="rtos.c::TaskCreate" ref="g784f87fb45eebb76d07478036ed228d3" args="(void(taskCode)(void *), char *name, int stackDepth, void *parameters, int priority)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void* TaskCreate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void(taskCode)(void *)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>stackDepth</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>priority</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a new task. 
<p>
Always be sure to block a task when not urgent to give priority to other tasks. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>taskCode</em>&nbsp;</td><td>A pointer to the function that will run when the task starts. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>A character string containing the name of the task. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stackDepth</em>&nbsp;</td><td>An integer specifying in bytes the size of the task's stack. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parameters</em>&nbsp;</td><td>A void* parameter which will be passed into the task at create time. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>priority</em>&nbsp;</td><td>An integer specifying the task's priority (0 lowest - 7 highest priority). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A pointer to the handle for the newly created task. </dd></dl>

<p>
Definition at line <a class="el" href="rtos_8c-source.html#l00077">77</a> of file <a class="el" href="rtos_8c-source.html">rtos.c</a>.
<p>
Referenced by <a class="el" href="poly_8c-source.html#l00163">Poly_SetActive()</a>, and <a class="el" href="usb_8c-source.html#l00059">Usb_SetActive()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="g5bc41573c59208d32d999e2f394ad3ce"></a><!-- doxytag: member="rtos.c::TaskDelete" ref="g5bc41573c59208d32d999e2f394ad3ce" args="(void *task)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TaskDelete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>task</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete an existing task. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>task</em>&nbsp;</td><td>A pointer to the handle of the task to be deleted. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="rtos_8c-source.html#l00088">88</a> of file <a class="el" href="rtos_8c-source.html">rtos.c</a>.
<p>
Referenced by <a class="el" href="poly_8c-source.html#l00189">PolyTask()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="gd02e088c48f69fd07cf3157bcceb01b7"></a><!-- doxytag: member="rtos.c::TaskEnterCritical" ref="gd02e088c48f69fd07cf3157bcceb01b7" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TaskEnterCritical           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Specify that a task is entering a period during which it should not be interrupted. 
<p>
Be sure to minimize use of this, and to call <a class="el" href="group___rtos.html#g0911fd273992ff4dec66d096a9dc3257">TaskExitCritical()</a> as soon as the task has completed its critical stage. Other tasks can't get any processor time while in this state, and performance might be compromised. 
<p>
Definition at line <a class="el" href="rtos_8c-source.html#l00099">99</a> of file <a class="el" href="rtos_8c-source.html">rtos.c</a>.
<p>
Referenced by <a class="el" href="timer_8c-source.html#l00194">Timer_Cancel()</a>, and <a class="el" href="timer_8c-source.html#l00104">Timer_Set()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="g0911fd273992ff4dec66d096a9dc3257"></a><!-- doxytag: member="rtos.c::TaskExitCritical" ref="g0911fd273992ff4dec66d096a9dc3257" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TaskExitCritical           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Specify that a task is exiting a critical period, in response to <a class="el" href="group___rtos.html#gd02e088c48f69fd07cf3157bcceb01b7">TaskEnterCritical()</a>. 
<p>
Once the task exits a critical period, the RTOS will resume switching this task as usual. 
<p>
Definition at line <a class="el" href="rtos_8c-source.html#l00108">108</a> of file <a class="el" href="rtos_8c-source.html">rtos.c</a>.
<p>
Referenced by <a class="el" href="timer_8c-source.html#l00194">Timer_Cancel()</a>, and <a class="el" href="timer_8c-source.html#l00104">Timer_Set()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="gbe9e0304997a15f46d9eae37be16e3f2"></a><!-- doxytag: member="rtos.c::TaskYield" ref="gbe9e0304997a15f46d9eae37be16e3f2" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TaskYield           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Give up the remaining time allotted to this task by the processor. 
<p>
The presently running task immeidately gives up the remaining time it has in the current timeslice so that other tasks can run. While <a class="el" href="group___rtos.html#g9a64a7c0e24f257826103d1d1bbb44fa">Sleep()</a> will wait the specified number of milliseconds before continuing, <a class="el" href="group___rtos.html#gbe9e0304997a15f46d9eae37be16e3f2">TaskYield()</a> will cause the task to take processor time again as soon as it's available. 
<p>
Definition at line <a class="el" href="rtos_8c-source.html#l00062">62</a> of file <a class="el" href="rtos_8c-source.html">rtos.c</a>.    </td>
  </tr>
</table>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>MAKE Controller Kit</title>
</head>

<body>
<hr size="1">
<div align="left"><font size="2">Last revision: 22 Sep 2006. MAKE Controller Kit, by </font><a href="http://www.makingthings.com"><img src="../resources/logo_brown_small.png" alt="MakingThings" width="100" height="40" border="0" align="middle" longdesc="MakingThings" /></a></div>
</body>
</html>
